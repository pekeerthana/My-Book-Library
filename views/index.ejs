<body>
    <%- include('partials/header.ejs'); -%>
        <div class="d-flex justify-content-end">
            <div class="dropdown mx-3 mb-3">
                <button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    Sort by
                </button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item <%= currentSort === 'loggeddate' ? 'active fw-bold' : '' %>"
                            href="/?sort=loggeddate"> Logged Date
                        </a>
                    </li>
                    <li><a class="dropdown-item <%= currentSort === 'title' ? 'active fw-bold' : '' %>"
                            href="/?sort=title"> Title
                        </a>
                    </li>
                    <li><a class="dropdown-item <%= currentSort === 'rating' ? 'active fw-bold' : '' %>"
                            href="/?sort=rating"> Rating
                        </a>
                    </li>
                </ul>

            </div>
        </div>

        <div class="row row-cols-1 row-cols-md-3 g-4 mx-2">

            <% for(let book of books){%>

                <div class="col-md-6">
                    <div
                        class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                        <div class="col p-4 d-flex flex-column position-static"> <strong
                                class="d-inline-block mb-2 text-primary-emphasis">Books</strong>
                            <h3 class="mb-0">
                                <%= book.title %>
                            </h3>
                            <div class="mb-1 text-body-secondary">
                                <%= new Date(book.loggeddate).toLocaleDateString() %>
                            </div>
                            <p class="card-text mb-auto">
                                <%= book.subtitle %>
                            </p>
                            <p>
                            <a href="/book/<%= book.id %>" class="icon-link gap-1 icon-link-hover stretched-link">
                                Continue reading   </a>
                                <span class="text-muted float-end" style="font-size: 0.9rem;">My Rating: <span class="fw-bold"><%= book.rating %> </span></span>
                                </p>
                        </div>
                        <div class="col-auto d-none d-lg-block">
                            <image src="https://covers.openlibrary.org/b/id/<%=book.id%>-M.jpg" class="img-fluid"
                                style="height: 250px; width: 200px; border: solid black " />
                        </div>
                    </div>
                </div>

                <% } %>
        </div>
        <%- include('partials/footer.ejs'); -%>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>